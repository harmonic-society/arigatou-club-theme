# Contact Form 7への移行ガイド

## 概要
現在のテーマには2つのお問い合わせページテンプレートが含まれています：
1. `page-contact.php` - カスタムフォーム処理（既存）
2. `page-contact-cf7.php` - Contact Form 7対応（新規）

## 移行手順

### ステップ 1: Contact Form 7の設定
1. `docs/contact-form-7-setup.md` の手順に従ってContact Form 7をインストール・設定
2. フォームを作成し、ショートコードを取得

### ステップ 2: テンプレートの切り替え

#### 方法A: 新しいページを作成
1. WordPress管理画面で新規固定ページを作成
2. ページテンプレートで「お問い合わせ (CF7版)」を選択
3. ページ内容にContact Form 7のショートコードを貼り付け

#### 方法B: 既存ページのテンプレート変更
1. 既存のお問い合わせページを編集
2. ページテンプレートを「お問い合わせ (CF7版)」に変更
3. ページ内容にContact Form 7のショートコードを貼り付け

### ステップ 3: ショートコードの設置
`page-contact-cf7.php` の以下の部分を編集：

```php
// 変更前
echo do_shortcode('[contact-form-7 id="YOUR-FORM-ID" title="ありがとう倶楽部 お問い合わせフォーム"]');

// 変更後（実際のIDに置き換え）
echo do_shortcode('[contact-form-7 id="123" title="ありがとう倶楽部 お問い合わせフォーム"]');
```

または、固定ページのエディタに直接ショートコードを貼り付けることも可能です。

## スタイルのカスタマイズ

### 適用されるCSSファイル
- `/assets/css/contact-form-7.css` - Contact Form 7専用スタイル
- `/assets/css/contact-page.css` - お問い合わせページ全体のレイアウト

### カスタマイズ方法
1. 色の変更は CSS変数（`:root` 内）を調整
2. レイアウトの調整は各クラスを編集
3. レスポンシブ対応はメディアクエリ内を調整

## トラブルシューティング

### フォームが表示されない
- Contact Form 7が有効化されているか確認
- ショートコードのIDが正しいか確認
- JavaScriptエラーがないか確認

### メールが送信されない
- `WP Mail SMTP` プラグインの導入を検討
- サーバーのメール送信設定を確認

### スタイルが適用されない
- ブラウザのキャッシュをクリア
- CSSファイルが正しく読み込まれているか確認

## 既存フォームとの違い

### 機能面
- **既存フォーム**: PHPで直接処理、functions.phpでメール送信
- **CF7版**: プラグインが処理、管理画面から設定変更可能

### メリット
- 管理画面から簡単に設定変更可能
- スパム対策（reCAPTCHA）が簡単に導入可能
- メール送信ログの管理（Flamingoプラグイン併用時）
- 多言語対応が容易

### デメリット
- プラグインへの依存
- アップデート管理が必要

## ロールバック

Contact Form 7から元のフォームに戻す場合：
1. ページテンプレートを「お問い合わせ」に戻す
2. functions.phpの`arigatou_club_handle_contact_form`関数が有効であることを確認

## サポート

問題が発生した場合は以下を参照：
- [Contact Form 7 公式ドキュメント](https://contactform7.com/ja/)
- テーマのドキュメント（このファイル）
- WordPress管理者に相談